<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
  {% block head %}
  <title>{% block title %}{{ SITENAME }}{% endblock title %}</title>
  <meta name="description" content="{% block description %}{% endblock description %}" />
  {# Boilerplate #}
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="generator" content="Pelican" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">
  
  {# DNS Prefetch for external resources #}
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="//www.googletagmanager.com">
  
  {# Preload critical resources with optimized font-display #}
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=fallback" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=fallback" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ SITEURL }}/theme/css/theme.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ SITEURL }}/theme/css/pygments.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="{{ SITEURL }}/theme/css/fallbacks.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  
  {# Critical CSS inlined for above-the-fold content #}
  <style>
    :root, [data-bs-theme="dark"] {
      --bs-body-color: #ece8d1;
      --bs-body-bg: #1b1d16;
      --bs-code-color: #a1dbb2;
      --code-background: #14140f;
      --brand-color: #eb7000;
      --spacing-unit: 30px;
      --content-width: 800px;
      --grey-color: #b4b4b4;
      --grey-color-light: #dcdcdc;
      --grey-color-dark: #7a7a7a;
      --base-font-family: Roboto, sans-serif;
      --base-font-size: 21px;
      --base-font-weight: 300;
      --small-font-size: 18px;
      --base-line-height: 1.5;
    }
    
    body {
      overflow-x: hidden;
      color: var(--bs-body-color);
      background-color: var(--bs-body-bg);
      letter-spacing: 0.02em;
      font: var(--base-font-weight) 21px/1.5 var(--base-font-family);
      -webkit-font-feature-settings: "kern" 1;
      -moz-font-feature-settings: "kern" 1;
      -o-font-feature-settings: "kern" 1;
      font-feature-settings: "kern" 1;
      font-kerning: normal;
    }
    
    .content {
      max-width: 780px;
      width: 100%;
      margin: 0 auto;
      padding: 0 1.875rem;
    }
    
    .navbar-outline {
      background-color: var(--bs-body-color);
      height: 5px;
    }
    
    .branding-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      font-family: "Press Start 2P", "Lucida Grande", monospace;
      font-size: 57px;
      line-height: 57px;
      margin: 10px;
    }
    
    .branding-container .maz {
      color: #f45d4c;
      display: inline-block;
    }
    
    .branding-container .dev {
      color: #f7a541;
      display: inline-block;
    }
    
    .branding-container .dir {
      color: #a1dbb2;
      display: inline-block;
    }
    
    .main-header-outer {
      text-align: center;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .retro-font { 
      font-family: "Press Start 2P", "Lucida Grande", monospace;
      font-size: 26px;
      line-height: 28px;
    }
    
    h1, h2, h3, h4, h5, h6 {
      font-family: "Lucida Grande", sans-serif;
      font-weight: 700;
    }
    
    h1 { color: #f45d4c; }
    h2 { color: #f7a541; }
    h3 { color: #faca66; }
    h4 { color: #fee5ad; }
    
    a {
      color: #009fc5;
      text-decoration: none;
    }
    
    img {
      max-width: 100%;
      vertical-align: middle;
    }
  </style>
  
  {# Fallback for browsers that don't support preload #}
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=fallback">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=fallback">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/theme.css">
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/pygments.css">
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/fallbacks.css">
  </noscript>
  
  {# Feature detection and conditional polyfill loading #}
  <script>window.SITEURL = "{{ SITEURL }}";</script>
  <script src="{{ SITEURL }}/theme/js/feature-detection.js"></script>
  {# Google Analytics #}
  {% if GOOGLE_ANALYTICS %}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ GOOGLE_ANALYTICS }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', '{{ GOOGLE_ANALYTICS }}');
  </script>
  {% endif %}
  {# RSS stuff #}
  {% if FEED_ALL_ATOM %}
  <link
    href="{{ FEED_DOMAIN }}/{% if FEED_ALL_ATOM_URL %}{{ FEED_ALL_ATOM_URL }}{% else %}{{ FEED_ALL_ATOM }}{% endif %}"
    type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Full Atom Feed" />
  {% endif %}
  {% if FEED_ALL_RSS %}
  <link href="{{ FEED_DOMAIN }}/{% if FEED_ALL_RSS_URL %}{{ FEED_ALL_RSS_URL }}{% else %}{{ FEED_ALL_RSS }}{% endif %}"
    type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Full RSS Feed" />
  {% endif %}
  {% if FEED_ATOM %}
  <link href="{{ FEED_DOMAIN }}/{%if FEED_ATOM_URL %}{{ FEED_ATOM_URL }}{% else %}{{ FEED_ATOM }}{% endif %}"
    type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Atom Feed" />
  {% endif %}
  {% if FEED_RSS %}
  <link href="{{ FEED_DOMAIN }}/{% if FEED_RSS_URL %}{{ FEED_RSS_URL }}{% else %}{{ FEED_RSS }}{% endif %}"
    type="application/rss+xml" rel="alternate" title="{{ SITENAME }} RSS Feed" />
  {% endif %}
  {% if CATEGORY_FEED_ATOM and category %}
  <link
    href="{{ FEED_DOMAIN }}/{% if CATEGORY_FEED_ATOM_URL %}{{ CATEGORY_FEED_ATOM_URL.format(slug=category.slug) }}{% else %}{{ CATEGORY_FEED_ATOM.format(slug=category.slug) }}{% endif %}"
    type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Categories Atom Feed" />
  {% endif %}
  {% if CATEGORY_FEED_RSS and category %}
  <link
    href="{{ FEED_DOMAIN }}/{% if CATEGORY_FEED_RSS_URL %}{{ CATEGORY_FEED_RSS_URL.format(slug=category.slug) }}{% else %}{{ CATEGORY_FEED_RSS.format(slug=category.slug) }}{% endif %}"
    type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Categories RSS Feed" />
  {% endif %}
  {% if TAG_FEED_ATOM and tag %}
  <link
    href="{{ FEED_DOMAIN }}/{% if TAG_FEED_ATOM_URL %}{{ TAG_FEED_ATOM_URL.format(slug=tag.slug) }}{% else %}{{ TAG_FEED_ATOM.format(slug=tag.slug) }}{% endif %}"
    type="application/atom+xml" rel="alternate" title="{{ SITENAME }} Tags Atom Feed" />
  {% endif %}
  {% if TAG_FEED_RSS and tag %}
  <link
    href="{{ FEED_DOMAIN }}/{% if TAG_FEED_RSS_URL %}{{ TAG_FEED_RSS_URL.format(slug=tag.slug) }}{% else %}{{ TAG_FEED_RSS.format(slug=tag.slug) }}{% endif %}"
    type="application/rss+xml" rel="alternate" title="{{ SITENAME }} Tags RSS Feed" />
  {% endif %}
  {% endblock head %}
</head>

<body>
  <!-- Skip Navigation Links -->
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <a href="#navigation" class="skip-link">Skip to navigation</a>
  
  <div class="navbar-outline"></div>
  <div class="content">
    <main id="main-content" role="main" aria-label="Main content">
      {% block content %}
      {% endblock %}
    </main>
    <hr class="mt-3" />
    <footer class="my-4" role="contentinfo" aria-label="Site footer">
      <h1 class="fs-5">{{ SITENAME }}</h1>
      <div class="text-muted" style="font-size: 12pt">
        <div class="d-flex">
          <div style="flex-basis: 50%;">
            <div class="d-flex flex-column gap-2">
              <div>
                <a href="https://github.com/{{ GITHUB_USERNAME }}" aria-label="Visit {{ GITHUB_USERNAME }} on GitHub">
                  <i class="icon" aria-hidden="true">{% include "github.svg" %}</i>
                  <span class="icon-text">{{ GITHUB_USERNAME }}</span>
                </a>
              </div>
              <div>
                <a href="/feed.xml" aria-label="Subscribe to RSS feed">
                  <i class="icon" aria-hidden="true">{% include "rss.svg" %}</i>
                  <span class="icon-text">RSS</span>
                </a>
              </div>
              <div>
                <a href="/feeds/all.atom.xml" aria-label="Subscribe to Atom feed">
                  <i class="icon" aria-hidden="true">{% include "rss.svg" %}</i>
                  <span class="icon-text">Atom</span>
                </a>
              </div>
            </div>
          </div>
          <div style="flex-basis: 50%;">
            <p>{{ SITE_DESCRIPTION }}</p>
          </div>
        </div>
        <div class="mt-3 text-center">
          <small>
            Proudly powered by <a href="https://getpelican.com/">Pelican</a>,
            which takes great advantage of <a href="https://www.python.org/">Python</a>.
          </small><!-- /#about -->
        </div>
      </div>
    </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  
  {# Image optimization script #}
  <script>
    // Optimize images after page load
    document.addEventListener('DOMContentLoaded', function() {
      const images = document.querySelectorAll('img:not([loading])');
      
      images.forEach(function(img) {
        // Add lazy loading to images not in viewport
        if (!isInViewport(img)) {
          img.setAttribute('loading', 'lazy');
        }
        
        // Add responsive image attributes if not present
        if (!img.hasAttribute('sizes')) {
          img.setAttribute('sizes', '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 800px');
        }
        
        // Add modern format support with fallback
        if (img.src && !img.dataset.optimized) {
          const webpSrc = img.src.replace(/\.(jpg|jpeg|png)$/i, '.webp');
          
          // Check if WebP is supported
          if (supportsWebP()) {
            const webpImg = new Image();
            webpImg.onload = function() {
              img.src = webpSrc;
            };
            webpImg.src = webpSrc;
          }
          
          img.dataset.optimized = 'true';
        }
      });
    });
    
    function isInViewport(element) {
      const rect = element.getBoundingClientRect();
      return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
      );
    }
    
    function supportsWebP() {
      const canvas = document.createElement('canvas');
      return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
    }
  </script>
</body>

</html>